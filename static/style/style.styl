@import "nib";
@import "_fa";

$color_accent = #feba0b

*
    box-sizing border-box

html, body
    margin 0
    padding 0
    // padding 8px 16px
    width 100%
    height 100%

    font-family Helvetica, 'Lucida Grande','Hiragino Kaku Gothic ProN', Meiryo, sans-serif
    -webkit-font-smoothing antialiased

body
    border-top 8px solid $color_accent

    background-attachment fixed
    background-image linear-gradient(to bottom, #fbfbfb, 30% #fbfbfb, 70% #fff)

a
    color #00b2ff

#wrap
    width 100%
    padding 16px 48px 0

#error
    text-align center

.source-quate
    display block
    margin 0 8px
    margin-bottom 32px

    font-size 12px

    color #777
    opacity .5

    a
        color #00b2ff

.title
    margin-top 2em
    margin-bottom 1.5em

    text-align center

    .title_links
        width (8em * 2 + 4em)
        margin 0 auto
        padding 0

        clearfix()

    .title_link
        display block
        width 8em
        float left

        line-height 1

        a
            color $color_accent
            text-decoration none

        &:hover
            text-decoration underline

        &.title_link--older
            // margin-right 3em
            text-align left

        &.title_link--latest
            width 4em
            text-align center

        &.title_link--newer
            // margin-left 3em
            text-align right

    .title_current
        display block
        margin 0
        margin-bottom .8em

        font-size 24px
        line-height 1
        text-align center
        font-weight normal
        // font-style italic
        vertical-align bottom

.message
    position fixed
    bottom 16px
    left 0
    z-index 2

    display block
    width 48px
    height 48px
    overflow visible
    // margin-bottom 1em

    font-size 32px
    line-height 1
    text-align center

    background-color #55acee
    color #fff
    text-decoration none
    // transform translateX(-100%)

    &:hover
        .message_text
            transform translateX(0)

    .message_icon
        position relative
        z-index 3

        display block
        padding 8px

        background-color #55acee

    .message_text
        position absolute
        top 0

        display block
        width 180px
        height 48px
        padding 8px
        padding-left 48px

        font-size 12px
        text-align left
        line-height 1.3
        letter-spacing .15em

        background-color #55acee
        transform translateX(-100%)
        transition-property transform
        transition-duration .3s
        // transition-timing-function cubic-bezier(0.5, 0.2, 1, 0.5)

    .message_text_typo
        font-size 16px
        letter-spacing .1em

.illusts
    position relative
    width 100%
    padding 0
    margin 0 auto

    list-style none

    &.illusts--notfound
        text-align center

        .illusts_notfound_text
            color #aaa

        .illusts_notfound_img
            // width 40px
            height 40px

            background-size 40px
            background-image url("../images/notfound.png")
            background-position center center
            background-repeat no-repeat

.illust
    position relative
    width 250px
    min-height 100px
    overflow hidden

    line-height 0 // Kill the Line-break space

    border-radius 4px
    box-shadow 0 4px 8px rgba(#b5b5ba, 0.5)

    transition-property transform, opacity
    transition-duration 1.5s

    &.illust--loading
        opacity 0
        transform translateY(8px)

    .illust_image
        width 100%

    .illust_overlay
        position absolute
        top 0

        display block
        width 100%
        height 100%

        color #fff
        cursor pointer

    .illust_meta
        position relative

        display flex
        justify-content left
        align-items center

        width 100%
        margin-top -24px
        padding 8px
        padding-top 32px

        font-size 12px
        line-height 1

        color #777
        background-image linear-gradient(to bottom, rgba(#fffffc, 0), 40% rgba(#fff, 1))// , 31% rgba(#fff, 0))
        background-color transparent

        transition-property opacity
        transition-timing-function cubic-bezier(0.5, 0, 0.2, 0.65)
        transition-duration .3s

        user-select none

    .illust_mata_author
        flex 1
        font-size 12px
        line-height 1.2

    // .illust_meta_actions
    //     width 3em

    .illust_action
        padding 0
        padding-left 8px

        border none
        background-color transparent
        outline none

        font-size 20px
        text-decoration none

        cursor pointer

        // &.illust_action--retweet
        //     color #fff

        // &.illust_action--retweeted
        //     color hsl(98, 71%, 55%)

        &.illust_action--fav
            color #bbb

        &.illust_action--favorited
            color hsl(44, 94%, 55%)


.sidebar
    position fixed
    top 0
    left 0
    z-index 2

    height 100%
    padding 8px
    padding-top 16px

    .sidebar_linkToTwitter
        position relative

        display inline-block

        width 32px
        height 32px

        font-size 32px
        line-height 1

        transition-property color
        transition-duration .3s

        &.sidebar_linkToTwitter--connected
            color #55acee

            &:hover
                color #bdbebf

        &.sidebar_linkToTwitter--disconnected
            color #bdbebf

            &:hover
                color #55acee

        .tooltip
            position absolute
            top 0
            left 120%

            width 12em
            padding 8px

            text-align center
            font-size 12px

            color #fff
            border-radius 4px
            background-color rgba(#000, .8)
            opacity 0

            transition-property opacity
            transition-duration .2s

            pointer-events none

            &::before
                content ''

                position absolute
                top 50%
                right 100%

                margin-top -5px

                border-width 5px
                border-color transparent
                border-style solid
                border-right-color rgba(#000, .8)

        &:hover
            .tooltip
                opacity 1

.footer
    max-width 100%
    padding 64px 0

    overflow hidden

    .footer_loading
        position relative

        display block
        width 40px
        height 40px
        margin 0 auto

        background-image url("../images/loading.gif")
        background-size 100%
        opacity .8

        &::before
            content ''

            position absolute
            top 25px
            right 120%

            width 250px

            border-top 1px solid #ddd

        &::after
            content ''

            position absolute
            top 25px
            left 120%

            width 250px

            border-top 1px solid #ddd


.loading
    position fixed
    top 0
    left 0
    z-index 3

    display flex
    width 100%
    height 100%

    justify-content center
    align-items center

    background-color #fff

    transition-property opacity
    transition-duration .4s

    pointer-events auto

    &.loading--hidden
        opacity 0
        pointer-events none

    .loading_inner
        text-align center

    .loading_image
        display block
        width 50px
        height 50px
        margin 0 auto

.viewer
    /* .viewer_meta_author(font-size + margin-bottom) + .viewer_meta_tweet(font-size + margin-bottom) */
    $icon-size = (12px + 4px + 14px + 8px)

    position fixed
    top 0
    left 0
    z-index 5

    display none
    width 100%
    height 100%
    padding 16px
    overflow auto

    background-color rgba(#eee, .8)
    opacity 0

    &.viewer--showing
        display block

        animation-name viewer-open
        animation-delay .1ms
        animation-duration .3s

    &.viewer--shown
        display block
        opacity 1

    .viewer_container
        position relative

        display flex
        width 100%
        height 100% // for .viewer_illust sizing criteria
        max-width 1024px
        margin 0 auto
        overflow hidden

        background-color #fff
        border-radius 4px

    .viewer_close
        position absolute
        right 0

        padding-right 8px

        font-size 32px
        line-height 1

        color rgba(#666, .5)
        cursor pointer

    .viewer_content
        display flex
        width 100%
        height 100%
        padding 8px
        padding-top (24px + 8px)

        flex-direction column
        justify-content flex-start
        align-items stretch
        align-content stretch

    .viewer_meta
        margin-bottom 8px
        border-bottom 1px solid #ddd
        clearfix()

    .viewer_meta_author-icon
        display block
        width $icon-size + 4px
        height $icon-size + 4px
        // margin-right 8px
        float left

        background-size 100%
        background-position center
        background-repeat no-repeat
        border-radius 2px

    .viewer_meta_author
        margin-bottom 4px
        margin-left ($icon-size + 16px)

        font-size 12px
        line-height 1

        color #777

    .viewer_meta_author-link
        margin-left 4px

    .viewer_meta_tweet
        margin-bottom 8px
        margin-left ($icon-size + 16px)

        font-size 14px
        line-height 1.7
        white-space pre-wrap

    .viewer_illust
        display block

        width 100%
        height 100%
        // max-width 100%
        // max-height 100%
        margin 0 auto
        flex 1

        background-repeat no-repeat
        background-size contain
        background-position center


@media screen and (max-width: 460px)
    body
        border-top none

    #wrap
        padding 16px 8px 0

    .message
        position relative
        bottom auto

        width 100%
        padding 8px
        padding-right 16px

        text-align right

        background-color $color_accent

        .message_icon
            display inline-block
            padding 0

            background-color transparent

        .message_text
            display none

    .illust
        width 45%

        .illust_meta
            opacity .7

    .sidebar
        display flex
        justify-content center
        align-items flex-end

        .sidebar_linkToTwitter
            width 40px
            height 40px

            font-size 40px

        .tooltip
            display none

@keyframes twitter-showing
    0%
        transform translateX(-100%)
    100%
        transform translateX(0)

@keyframes twitter-hiding
    0%
        transform translateX(0)
    100%
        transform translateX(-100%)

@keyframes viewer-open
    0%
        opacity 0

    100%
        opacity 1
